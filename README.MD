# Сниппет _api__get-catalog
Возвращает категории товаров, товары, модификаторы

Локальные константы:

+ catalogId = 4 - идентификатор каталога
 

Входящие переменные:
+ outputFormat - формат выходных данных, если не задан, то используется JSON
+ tvs - список названий переменных шаблона или системных переменных
+ needEscape - нужно ли выполнить mysqli_real_escape для каждого названия переменной шаблона, по умолчанию установлено в false
+ view - доступные варианты (tree(вернет древовидную структуру для категорий), line(вернет линейную структуру для категорий), both(вернет обе структуры))

На выходе: 
+ Массив содержащий в себе
    + Массив или массивы(зависит от переменной view) переменных для активных категорий, которые не скрыты из меню
    + Массив переменных для активных товаров, которые не скрыты из меню и которые принадлежат активным категориям
    + Массив переменных для активных модификаторов, которые не скрыты из меню и которые принадлежат активным категориям модификаторов

Доступные форматы выходных данных:
1. JSON

## Пример вызова


```
(async () => {
    let request={
        method: 'get-catalog',
        view: 'tree',
        outputFormat: 'json'
    };
    let rawResponse = await fetch('[~30~]', {
        method: 'POST',
        headers: {
            'Content-Type': 'text/html'
        },
        body: JSON.stringify(request)
    });
    console.log(JSON.parse(await rawResponse.text()));
})();
```
